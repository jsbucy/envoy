admin:
  access_log_path: /tmp/admin_access.log
  address:
    socket_address: { address: 127.0.0.1, port_value: 9901 }

static_resources:
  listeners:
    - name: smtp
      address:
       socket_address: { address: 127.0.0.1, port_value: 2527 }
   
      filter_chains:
       - filters:
         - name: envoy.tcp_proxy
           config:
             stat_prefix: vernemq
             cluster: tcp_proxy_backend
         transport_socket:
          name: "smtp_starttls"
          typed_config:
            "@type": type.googleapis.com/envoy.api.v2.auth.DownstreamTlsContext
            common_tls_context:
              tls_certificates:
                certificate_chain:
                  filename: "example-com.crt"
                private_key:
                  filename: "example-com.key"

  clusters:
  - name: tcp_proxy_backend
    connect_timeout: 0.25s
    type: STATIC
    lb_policy: ROUND_ROBIN
    load_assignment:
      cluster_name: some_service
      endpoints:
      - lb_endpoints:
        - endpoint:
            address:
              socket_address:
                address: 127.0.0.1
                port_value: 12525
